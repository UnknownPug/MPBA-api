<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Thu Dec 26 13:58:22 CET 2024 -->
<title>CardServiceImpl</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-12-26">
<meta name="description" content="declaration: package: api.mpba.rastvdmy.service.impl, class: CardServiceImpl">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">api.mpba.rastvdmy.service.impl</a></div>
<h1 title="Class CardServiceImpl" class="title">Class CardServiceImpl</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="../generator/FinancialDataGenerator.html" title="class in api.mpba.rastvdmy.service.generator">api.mpba.rastvdmy.service.generator.FinancialDataGenerator</a>
<div class="inheritance">api.mpba.rastvdmy.service.impl.CardServiceImpl</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../CardService.html" title="interface in api.mpba.rastvdmy.service">CardService</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Service
</span><span class="modifiers">public class </span><span class="element-name type-name-label">CardServiceImpl</span>
<span class="extends-implements">extends <a href="../generator/FinancialDataGenerator.html" title="class in api.mpba.rastvdmy.service.generator">FinancialDataGenerator</a>
implements <a href="../CardService.html" title="interface in api.mpba.rastvdmy.service">CardService</a></span></div>
<div class="block">Implementation of the CardService interface for managing user bank cards.
 This service provides methods for adding, retrieving, and removing cards associated with bank accounts.
 It includes functionality for card encryption and data masking to ensure sensitive information is handled securely.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#MAX_AVAILABLE_CARDS" class="member-name-link">MAX_AVAILABLE_CARDS</a></code></div>
<div class="col-last even-row-color">
<div class="block">Maximum number of cards that can be created per user.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#MIN_AVAILABLE_CARDS" class="member-name-link">MIN_AVAILABLE_CARDS</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Minimum number of cards that can be created per user.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(api.mpba.rastvdmy.repository.CardRepository,api.mpba.rastvdmy.repository.BankIdentityRepository,api.mpba.rastvdmy.repository.BankAccountRepository,api.mpba.rastvdmy.service.TokenVerifierService)" class="member-name-link">CardServiceImpl</a><wbr>(<a href="../../repository/CardRepository.html" title="interface in api.mpba.rastvdmy.repository">CardRepository</a>&nbsp;cardRepository,
 <a href="../../repository/BankIdentityRepository.html" title="interface in api.mpba.rastvdmy.repository">BankIdentityRepository</a>&nbsp;bankIdentityRepository,
 <a href="../../repository/BankAccountRepository.html" title="interface in api.mpba.rastvdmy.repository">BankAccountRepository</a>&nbsp;bankAccountRepository,
 <a href="../TokenVerifierService.html" title="interface in api.mpba.rastvdmy.service">TokenVerifierService</a>&nbsp;tokenVerifierService)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructs a CardServiceImpl with the specified repositories and services.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addAccountCard(java.lang.String,java.util.UUID,jakarta.servlet.http.HttpServletRequest)" class="member-name-link">addAccountCard</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bankName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;accountId,
 jakarta.servlet.http.HttpServletRequest&nbsp;request)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds a new card associated with the specified bank account.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#connectCards(api.mpba.rastvdmy.entity.BankAccount)" class="member-name-link">connectCards</a><wbr>(<a href="../../entity/BankAccount.html" title="class in api.mpba.rastvdmy.entity">BankAccount</a>&nbsp;account)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Connects a number of cards to a specified bank account.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#decryptCardData(api.mpba.rastvdmy.entity.Card,boolean)" class="member-name-link">decryptCardData</a><wbr>(<a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a>&nbsp;card,
 boolean&nbsp;unmask)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Decrypts the sensitive data of a card, optionally unmasking it.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateCard(java.lang.String,java.lang.String,java.lang.String,api.mpba.rastvdmy.entity.BankAccount)" class="member-name-link">generateCard</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;cardNumber,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;cvv,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pin,
 <a href="../../entity/BankAccount.html" title="class in api.mpba.rastvdmy.entity">BankAccount</a>&nbsp;account)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generates and encrypts a new card with the provided details.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAccountCardById(java.lang.String,java.util.UUID,java.util.UUID,jakarta.servlet.http.HttpServletRequest,java.lang.String)" class="member-name-link">getAccountCardById</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bankName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;accountId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;cardId,
 jakarta.servlet.http.HttpServletRequest&nbsp;request,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;type)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a specific card associated with a bank account by card ID.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAccountCards(java.lang.String,java.util.UUID,jakarta.servlet.http.HttpServletRequest)" class="member-name-link">getAccountCards</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bankName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;accountId,
 jakarta.servlet.http.HttpServletRequest&nbsp;request)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all cards associated with a specific bank account.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeAccountCard(java.lang.String,java.util.UUID,java.util.UUID,jakarta.servlet.http.HttpServletRequest)" class="member-name-link">removeAccountCard</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bankName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;accountId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;cardId,
 jakarta.servlet.http.HttpServletRequest&nbsp;request)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Removes a specific card associated with a bank account.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeAllCards(api.mpba.rastvdmy.entity.BankAccount)" class="member-name-link">removeAllCards</a><wbr>(<a href="../../entity/BankAccount.html" title="class in api.mpba.rastvdmy.entity">BankAccount</a>&nbsp;account)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Removes all cards associated with a specified bank account.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-api.mpba.rastvdmy.service.generator.FinancialDataGenerator">Methods inherited from class&nbsp;api.mpba.rastvdmy.service.generator.<a href="../generator/FinancialDataGenerator.html" title="class in api.mpba.rastvdmy.service.generator">FinancialDataGenerator</a></h3>
<code><a href="../generator/FinancialDataGenerator.html#generateAccountNumber()">generateAccountNumber</a>, <a href="../generator/FinancialDataGenerator.html#generateBankNumber()">generateBankNumber</a>, <a href="../generator/FinancialDataGenerator.html#generateCardNumber()">generateCardNumber</a>, <a href="../generator/FinancialDataGenerator.html#generateCvv()">generateCvv</a>, <a href="../generator/FinancialDataGenerator.html#generateIban()">generateIban</a>, <a href="../generator/FinancialDataGenerator.html#generatePin()">generatePin</a>, <a href="../generator/FinancialDataGenerator.html#generateSwift()">generateSwift</a>, <a href="../generator/FinancialDataGenerator.html#getRandomExpirationDate(java.time.LocalDate)">getRandomExpirationDate</a>, <a href="../generator/FinancialDataGenerator.html#getRandomStartDate()">getRandomStartDate</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="MAX_AVAILABLE_CARDS">
<h3>MAX_AVAILABLE_CARDS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAX_AVAILABLE_CARDS</span></div>
<div class="block">Maximum number of cards that can be created per user.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../constant-values.html#api.mpba.rastvdmy.service.impl.CardServiceImpl.MAX_AVAILABLE_CARDS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MIN_AVAILABLE_CARDS">
<h3>MIN_AVAILABLE_CARDS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MIN_AVAILABLE_CARDS</span></div>
<div class="block">Minimum number of cards that can be created per user.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../constant-values.html#api.mpba.rastvdmy.service.impl.CardServiceImpl.MIN_AVAILABLE_CARDS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(api.mpba.rastvdmy.repository.CardRepository,api.mpba.rastvdmy.repository.BankIdentityRepository,api.mpba.rastvdmy.repository.BankAccountRepository,api.mpba.rastvdmy.service.TokenVerifierService)">
<h3>CardServiceImpl</h3>
<div class="member-signature"><span class="annotations">@Autowired
</span><span class="modifiers">public</span>&nbsp;<span class="element-name">CardServiceImpl</span><wbr><span class="parameters">(<a href="../../repository/CardRepository.html" title="interface in api.mpba.rastvdmy.repository">CardRepository</a>&nbsp;cardRepository,
 <a href="../../repository/BankIdentityRepository.html" title="interface in api.mpba.rastvdmy.repository">BankIdentityRepository</a>&nbsp;bankIdentityRepository,
 <a href="../../repository/BankAccountRepository.html" title="interface in api.mpba.rastvdmy.repository">BankAccountRepository</a>&nbsp;bankAccountRepository,
 <a href="../TokenVerifierService.html" title="interface in api.mpba.rastvdmy.service">TokenVerifierService</a>&nbsp;tokenVerifierService)</span></div>
<div class="block">Constructs a CardServiceImpl with the specified repositories and services.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cardRepository</code> - the repository for card data</dd>
<dd><code>bankIdentityRepository</code> - the repository for bank identity data</dd>
<dd><code>bankAccountRepository</code> - the repository for bank account data</dd>
<dd><code>tokenVerifierService</code> - the service for extracting user token and getting user data from the request</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getAccountCards(java.lang.String,java.util.UUID,jakarta.servlet.http.HttpServletRequest)">
<h3>getAccountCards</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a>&gt;</span>&nbsp;<span class="element-name">getAccountCards</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bankName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;accountId,
 jakarta.servlet.http.HttpServletRequest&nbsp;request)</span></div>
<div class="block">Retrieves all cards associated with a specific bank account.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../CardService.html#getAccountCards(java.lang.String,java.util.UUID,jakarta.servlet.http.HttpServletRequest)">getAccountCards</a></code>&nbsp;in interface&nbsp;<code><a href="../CardService.html" title="interface in api.mpba.rastvdmy.service">CardService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>bankName</code> - the name of the bank</dd>
<dd><code>accountId</code> - the ID of the bank account</dd>
<dd><code>request</code> - the HTTP request containing user data</dd>
<dt>Returns:</dt>
<dd>a list of cards associated with the specified account</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exception/ApplicationException.html" title="class in api.mpba.rastvdmy.exception">ApplicationException</a></code> - if no cards are found for the specified account</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAccountCardById(java.lang.String,java.util.UUID,java.util.UUID,jakarta.servlet.http.HttpServletRequest,java.lang.String)">
<h3>getAccountCardById</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a></span>&nbsp;<span class="element-name">getAccountCardById</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bankName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;accountId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;cardId,
 jakarta.servlet.http.HttpServletRequest&nbsp;request,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;type)</span></div>
<div class="block">Retrieves a specific card associated with a bank account by card ID.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../CardService.html#getAccountCardById(java.lang.String,java.util.UUID,java.util.UUID,jakarta.servlet.http.HttpServletRequest,java.lang.String)">getAccountCardById</a></code>&nbsp;in interface&nbsp;<code><a href="../CardService.html" title="interface in api.mpba.rastvdmy.service">CardService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>bankName</code> - the name of the bank</dd>
<dd><code>accountId</code> - the ID of the bank account</dd>
<dd><code>cardId</code> - the ID of the card to retrieve</dd>
<dd><code>request</code> - the HTTP request containing user data</dd>
<dd><code>type</code> - the visibility type (e.g., "visible" or "hidden")</dd>
<dt>Returns:</dt>
<dd>the specified card if found</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exception/ApplicationException.html" title="class in api.mpba.rastvdmy.exception">ApplicationException</a></code> - if the specified card is not found</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="decryptCardData(api.mpba.rastvdmy.entity.Card,boolean)">
<h3>decryptCardData</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">decryptCardData</span><wbr><span class="parameters">(<a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a>&nbsp;card,
 boolean&nbsp;unmask)</span></div>
<div class="block">Decrypts the sensitive data of a card, optionally unmasking it.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>card</code> - the card to decrypt</dd>
<dd><code>unmask</code> - whether to unmask the data</dd>
<dt>Returns:</dt>
<dd>true if decryption was successful; false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addAccountCard(java.lang.String,java.util.UUID,jakarta.servlet.http.HttpServletRequest)">
<h3>addAccountCard</h3>
<div class="member-signature"><span class="annotations">@Transactional
</span><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a></span>&nbsp;<span class="element-name">addAccountCard</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bankName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;accountId,
 jakarta.servlet.http.HttpServletRequest&nbsp;request)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Adds a new card associated with the specified bank account.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../CardService.html#addAccountCard(java.lang.String,java.util.UUID,jakarta.servlet.http.HttpServletRequest)">addAccountCard</a></code>&nbsp;in interface&nbsp;<code><a href="../CardService.html" title="interface in api.mpba.rastvdmy.service">CardService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>bankName</code> - the name of the bank</dd>
<dd><code>accountId</code> - the ID of the bank account</dd>
<dd><code>request</code> - the HTTP request containing user data</dd>
<dt>Returns:</dt>
<dd>the created Card</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if there is an error while adding the card</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="connectCards(api.mpba.rastvdmy.entity.BankAccount)">
<h3>connectCards</h3>
<div class="member-signature"><span class="annotations">@Transactional
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">connectCards</span><wbr><span class="parameters">(<a href="../../entity/BankAccount.html" title="class in api.mpba.rastvdmy.entity">BankAccount</a>&nbsp;account)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Connects a number of cards to a specified bank account.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../CardService.html#connectCards(api.mpba.rastvdmy.entity.BankAccount)">connectCards</a></code>&nbsp;in interface&nbsp;<code><a href="../CardService.html" title="interface in api.mpba.rastvdmy.service">CardService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>account</code> - the bank account to connect cards to</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if there is an error while connecting cards</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateCard(java.lang.String,java.lang.String,java.lang.String,api.mpba.rastvdmy.entity.BankAccount)">
<h3>generateCard</h3>
<div class="member-signature"><span class="annotations">@Transactional
</span><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../entity/Card.html" title="class in api.mpba.rastvdmy.entity">Card</a></span>&nbsp;<span class="element-name">generateCard</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;cardNumber,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;cvv,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pin,
 <a href="../../entity/BankAccount.html" title="class in api.mpba.rastvdmy.entity">BankAccount</a>&nbsp;account)</span>
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Generates and encrypts a new card with the provided details.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cardNumber</code> - the card number</dd>
<dd><code>cvv</code> - the CVV of the card</dd>
<dd><code>pin</code> - the PIN for the card</dd>
<dd><code>account</code> - the bank account associated with the card</dd>
<dt>Returns:</dt>
<dd>the generated Card</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if there is an error while generating the card</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeAccountCard(java.lang.String,java.util.UUID,java.util.UUID,jakarta.servlet.http.HttpServletRequest)">
<h3>removeAccountCard</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">removeAccountCard</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bankName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;accountId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link">UUID</a>&nbsp;cardId,
 jakarta.servlet.http.HttpServletRequest&nbsp;request)</span></div>
<div class="block">Removes a specific card associated with a bank account.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../CardService.html#removeAccountCard(java.lang.String,java.util.UUID,java.util.UUID,jakarta.servlet.http.HttpServletRequest)">removeAccountCard</a></code>&nbsp;in interface&nbsp;<code><a href="../CardService.html" title="interface in api.mpba.rastvdmy.service">CardService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>bankName</code> - the name of the bank</dd>
<dd><code>accountId</code> - the ID of the bank account</dd>
<dd><code>cardId</code> - the ID of the card to remove</dd>
<dd><code>request</code> - the HTTP request containing user data</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exception/ApplicationException.html" title="class in api.mpba.rastvdmy.exception">ApplicationException</a></code> - if the specified card is not found</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeAllCards(api.mpba.rastvdmy.entity.BankAccount)">
<h3>removeAllCards</h3>
<div class="member-signature"><span class="annotations">@Transactional
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">removeAllCards</span><wbr><span class="parameters">(<a href="../../entity/BankAccount.html" title="class in api.mpba.rastvdmy.entity">BankAccount</a>&nbsp;account)</span></div>
<div class="block">Removes all cards associated with a specified bank account.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../CardService.html#removeAllCards(api.mpba.rastvdmy.entity.BankAccount)">removeAllCards</a></code>&nbsp;in interface&nbsp;<code><a href="../CardService.html" title="interface in api.mpba.rastvdmy.service">CardService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>account</code> - the bank account whose cards should be removed</dd>
<dt>Throws:</dt>
<dd><code><a href="../../exception/ApplicationException.html" title="class in api.mpba.rastvdmy.exception">ApplicationException</a></code> - if no cards are found for the specified account</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
